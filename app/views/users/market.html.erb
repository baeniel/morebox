<%= render 'users/market_style' %>
<style>
  .line-height-30 {
    line-height: 30px;
  }
  body {
    background: #e9edf1 !important;
  }
  .ui.selection.dropdown .menu {
    max-height: 11.014286rem;
  }
  .fancy-color {
    color: #6200EE;
  }
  .cal_form {
    width: 80%;
    height: 7vh;
  }
  ::placeholder {
    color: #6200EE !important;
  }
  .form-control {
    border-color: #6200EE !important;
    color: #6200EE !important;
  }
  .ui.selection.dropdown {
    width: 80%;
  }
</style>
<div class="text-left px-4 py-3 bg-white">
  <%= link_to fit_table_path do %>
    <%= image_tag "/fittable_logo.png", class: "w-50" %>
  <% end %>
</div>
<div class="progress mt-0" style="margin-bottom: 0px;">
  <div class="progress-bar" id="top-progress-bar" role="progressbar" style="width: 10%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<%= form_for Post.new do |f| %>
  <%= f.hidden_field :post_type, value: params[:challenge] %>
  <div class="tab-content" id="myTabContent">
    <%= render 'survey_tab_pane', index: 0, next_tab: 1 do %>
      <h2 class="fancy-color text-left mt-5">당신은 몇 살인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 나이를 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :age, class: "text-center form-control mt-5 col-4", value: 24, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 1, prev_tab: 0, next_tab: 2 do %>
      <h2 class="fancy-color text-left mt-5">당신은 몇 cm인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 키를 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :height, class: "text-center form-control mt-5 col-4", step: :any, value: 165, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 2, prev_tab: 1, next_tab: 3 do %>
      <h2 class="fancy-color text-left mt-5">당신은 몇 kg인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 체중을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :weight, class: "text-center form-control mt-5 col-4", step: :any, value: 55, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 3, prev_tab: 2, next_tab: 4 do %>
      <h2 class="fancy-color text-left mt-5">당신의 성별은 무엇인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.select(:gender, Post.genders.keys.map {|gender| [gender.titleize, gender]}, {}, class: "text-center form-control custom_option mt-5 col-4") %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 4, prev_tab: 3, next_tab: 5 do %>
      <h2 class="fancy-color text-left mt-5">당신의 활동량은 어떻게 되시나요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-2"></div>
            <%= f.select(:activity, Post.activities.keys.map {|activity| [activity.titleize, activity]}, {}, class: "text-center form-control custom_option mt-5 col-8") %>
            <div class="col-2"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 5, prev_tab: 4, next_tab: 6 do %>
      <h2 class="fancy-color text-left mt-5">당신은 1회 운동할 때 평균 몇 분을 운동 하시나요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :work_time, class: "text-center form-control mt-5 col-4", value: 60, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 6, prev_tab: 5, next_tab: 7 do %>
      <h2 class="fancy-color text-left mt-5">당신은 그 운동을 주 몇 회 이상 하실 계획입니까?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :work_count, class: "text-center form-control mt-5 col-4", value: 3, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 7, prev_tab: 6, next_tab: 8 do %>
      <h2 class="fancy-color text-left mt-5">당신은 그 운동을 얼마나 강하게 하십니까?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.select(:work_strength, Post.work_strengths.keys.map {|strength| [strength.titleize, strength]}, {}, class: "text-center form-control custom_option mt-5 col-4") %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 8, prev_tab: 7, next_tab: 9 do %>
      <h2 class="fancy-color text-left mt-5">당신의 목표 체중은 몇kg인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 목표 체중을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.number_field :target_weight, class: "text-center form-control mt-5 col-4", step: :any, value: 53, required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 9, prev_tab: 8, next_tab: 10 do %>
      <h2 class="fancy-color text-left mt-5">당신의 목표 날짜는 며칠인가요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 목표 날짜를 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.text_field :target_date, class: "text-center form-control mt-5 col-4", id: "target_date", value: Date.current + 1.months, readonly: true %>
            <%#= f.text_field :target_date, start_month: Date.current + 3.months, class: "text-center form-control mt-5 col-4", id: "target_date", value: Date.current + 3.months, readonly: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 10, prev_tab: 9, next_tab: 11 do %>
      <h2 class="fancy-color text-left mt-5">점심은 어느정도로 먹나요?</h2>
      <h4 class="text-dark text-left">오직 당신만을 위한 맞춤형 식단과, 하루 칼로리 목표를 <br> 제공받기 위한 질문의 답을 입력해 주세요.</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
              <%= f.select(:lunch, Post.lunches.keys.map {|lunch| [lunch.titleize, lunch]}, {}, class: "text-center form-control custom_option mt-5 col-4") %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: 11, prev_tab: 10, next_tab: -1 do %>
      <h2 class="fancy-color text-left mt-5">특정한 질환이 있나요?</h2>
      <h4 class="text-dark text-left">정말 마지막 질문입니다!</h4>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-4"></div>
            <%= f.text_field :sickness, class: "text-center form-control mt-5 col-4", value: "없음", required: true %>
            <div class="col-4"></div>
          </div>
        </div>
      </div>
    <% end %>

    <%= render 'survey_tab_pane', index: -1, prev_tab: 11 do %>
      <div class="border py-2" style="background-color: white;">
        <i class="fas fa-2x fa-check" style="color: #200C58;"></i>
        <h2 style="margin-top: 3%; color: #200C58;">챌린지 참여 준비 완료</h2>
        <div class="row justify-content-center">
          <%= f.number_field :phone, class: "text-left form-control cal_form mt-2", placeholder: "핸드폰 번호를 입력하세요. 01012341234", required: true %>
          <%= f.text_field :name, class: "text-left form-control cal_form mt-2", placeholder: "상담 시 사용할 닉네임을 입력하세요.", required: true %>
          <%= f.text_field :email, class: "text-left form-control cal_form mt-2", placeholder: "계약서를 받을 이메일을 입력하세요.", required: true %>
          <p class="mt-3" style="margin-bottom: 1%;">도전 기간을 선택하세요:)</p>
          <%= f.select :period, options_for_select(["2주", "4주"]), { prompt: "2주" }, { class: 'form-control', id: 'select_period', require: true } %>

          <p class="mt-3" style="margin-bottom: 1%;">챌린지 머니를 입력하세요!</p>
          <%= f.number_field :money, class: 'text-left form-control cal_form', placeholder: "ex) 12000 / 35000", style: "width: 80%;", required: true %>

          <%= f.submit "챌린지 참여하기", class: "btn btn-outline btn-lg text-white mt-4 mb-4", style: "background-color: #200e57; border-color: #200e57; width: 80%;" %>
        </div>
      </div>

      <div class="container text-center py-2"">
        <div class="description-block" style="color: #707070;">
          <div class="row justify-content-center">
            <div class="col-12">
              <i class="fas fa-2x fa-check-circle mb-2" style="color: #6200EE"></i>
              <p>상담은 카카오톡 플러스친구를 이용하여 블라인드로 <br>진행됩니다. 프로그램에 진실되게 임해주세요!</p>
            </div>
          </div> <br>
          <div class="row justify-content-center mt-3 mb-3">
            <div class="col-6">
              <i class="fas fa-2x fa-check-circle mb-2" style="color: #6200EE"></i>
              <p>상담을 시작할 수 있는 <br>카톡방 링크가 전달됩니다.</p>
              <%= image_tag '/phone1.png' %>
            </div>
            <div class="col-6">
              <i class="fas fa-2x fa-check-circle mb-2" style="color: #6200EE"></i>
              <p>카톡방 참여 후 전담 코치가 <br>배정되어 연락을 드립니다.</p>
              <%= image_tag '/phone2.png' %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<script>
  $('.custom_option').dropdown();
  $('#select_period').dropdown();

  $(".nav-btn").click(function(){
    $(this).removeClass("active");
    let targetTab = $(this).attr("href").split("#tab-")[1]

    ga('send', 'pageview', '<%= market_users_path %>#tab-'+targetTab);
    gtag('config', 'UA-158638310-3', {
        page_title: '<%= "#{controller_name} #{action_name}" %> tab ' + targetTab,
        page_location: '<%= market_users_path %>#tab-' + targetTab,
        page_path: '<%= market_users_path %>#tab-' + targetTab
      });
  });
  $("#target_date").datepicker({
                dateFormat: 'yy-mm-dd' //Input Display Format 변경
                ,showOtherMonths: true //빈 공간에 현재월의 앞뒤월의 날짜를 표시
                ,showMonthAfterYear:true //년도 먼저 나오고, 뒤에 월 표시
                ,changeYear: true //콤보박스에서 년 선택 가능
                ,changeMonth: true //콤보박스에서 월 선택 가능
                ,buttonImageOnly: true //기본 버튼의 회색 부분을 없애고, 이미지만 보이게 함
                ,buttonText: "선택" //버튼에 마우스 갖다 댔을 때 표시되는 텍스트
                ,yearSuffix: "년" //달력의 년도 부분 뒤에 붙는 텍스트
                ,monthNamesShort: ['1','2','3','4','5','6','7','8','9','10','11','12'] //달력의 월 부분 텍스트
                ,monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'] //달력의 월 부분 Tooltip 텍스트
                ,dayNamesMin: ['일','월','화','수','목','금','토'] //달력의 요일 부분 텍스트
                ,dayNames: ['일요일','월요일','화요일','수요일','목요일','금요일','토요일'] //달력의 요일 부분 Tooltip 텍스트
                ,minDate: "+30D" //최소 선택일자(-1D:하루전, -1M:한달전, -1Y:일년전)
                ,maxDate: "+10Y" //최대 선택일자(+1D:하루후, -1M:한달후, -1Y:일년후)
            });
</script>
